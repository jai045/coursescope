# Vercel Deployment Steps for CourseScope

## Quick Summary

Your project has **two parts** that need to be deployed separately:

1. **Backend** (Python/API) â†’ Vercel Serverless Functions
2. **Frontend** (React) â†’ Vercel Static Site

## ğŸš€ Quick Start (5 minutes)

### Prerequisites
- Vercel account (free at https://vercel.com)
- GitHub repository with your code pushed
- Vercel CLI installed: `npm i -g vercel`

### Step 1: Build Your Frontend
```bash
npm run build
# Creates /dist folder
```

### Step 2: Deploy to Vercel via Dashboard
1. Go to https://vercel.com/dashboard
2. Click **"New Project"**
3. Select your GitHub repository
4. Vercel will auto-detect your setup
5. Click **"Deploy"**

### Step 3: Add Environment Variable
In your Vercel project settings:
1. Go to **Settings** â†’ **Environment Variables**
2. Add new variable:
   - Name: `VITE_API_URL`
   - Value: `https://coursescope-api.vercel.app/api` (replace with your backend URL)
   - Environments: **Production** âœ“

3. Redeploy the frontend (Project â†’ Deployments â†’ Latest â†’ Redeploy)

### Step 4: Done! âœ…
- Frontend: `https://your-project.vercel.app`
- Backend: `https://your-project-api.vercel.app/api`

---

## ğŸ“‹ Detailed Deployment Guide

### Option A: Using Vercel Dashboard (Recommended for First-Time)

#### Deploy Backend First

1. Open Vercel Dashboard: https://vercel.com/dashboard
2. Click **"New Project"**
3. Click **"Select a Git Repository"**
4. Find and select your repository
5. **Configuration:**
   - Framework: None (Other)
   - Root Directory: Leave empty (Vercel auto-detects)
   - Build Command: Leave empty
   - Output Directory: Leave empty
6. Click **"Deploy"**
7. Wait for deployment to complete
8. **Copy the URL** (e.g., `https://coursescope-api.vercel.app`)

#### Deploy Frontend

1. Go to Vercel Dashboard again
2. Click **"New Project"** (create separate project for frontend)
3. Select same repository
4. **Configuration:**
   - Framework: Vite
   - Root Directory: Leave empty
   - Build Command: `npm run build`
   - Output Directory: `dist`
   - Environment Variables:
     - `VITE_API_URL`: `https://coursescope-api.vercel.app/api`
5. Click **"Deploy"**

---

### Option B: Using Vercel CLI (Terminal)

#### Deploy Backend
```bash
cd api
vercel --prod
# Follow prompts
# Note the URL that appears
```

#### Deploy Frontend
```bash
cd ..
vercel --prod
# When prompted for environment variables:
# - VITE_API_URL: <backend-url-from-above>/api
```

---

## ğŸ” Testing Your Deployment

1. Open your frontend URL in browser
2. Open DevTools (F12)
3. Go to Network tab
4. Click on any API request (e.g., `/api/majors`)
5. Check that the request goes to your backend URL

### Common Issues

| Issue | Solution |
|-------|----------|
| API returns 404 | Backend not deployed or URL wrong in `VITE_API_URL` |
| CORS errors | Check `api/_db.py` has CORS enabled |
| Database not found | Ensure `uic_courses.db` is in `/api` folder |
| Blank page | Check build output, run `npm run build` locally |

---

## ğŸ›  Environment Setup

Your app already supports environment variables:

**In `src/App.jsx`:**
```javascript
const API_URL = import.meta.env.VITE_API_URL || "/api";
```

This means:
- **Locally**: Uses `/api` (proxied via vite.config.js)
- **Production**: Uses `VITE_API_URL` environment variable

---

## ğŸ“ Project Structure for Vercel

```
coursescope/
â”œâ”€â”€ api/                      # â† Deploy as backend service
â”‚   â”œâ”€â”€ _db.py
â”‚   â”œâ”€â”€ majors.py
â”‚   â”œâ”€â”€ courses.py
â”‚   â”œâ”€â”€ *.py
â”‚   â””â”€â”€ uic_courses.db
â”œâ”€â”€ src/                      # â† Build and deploy as frontend
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json              # â† Frontend dependencies
â”œâ”€â”€ vite.config.js            # â† Frontend config
â”œâ”€â”€ vercel.json               # â† Deployment config
â””â”€â”€ dist/                      # â† Generated by `npm run build`
```

---

## ğŸ’¾ Database & Persistence

SQLite (`uic_courses.db`) works on Vercel for **read-only** operations.

**If you need to write data:**
- Consider PostgreSQL (via Vercel Postgres or Neon)
- Or use Vercel Blob Storage

For now, SQLite is fine since your app is read-only.

---

## ğŸ” Security Considerations

1. **CORS**: Currently allows all origins (`origins: "*"`)
   - Consider restricting to your domain in production

2. **API Keys**: Don't commit sensitive data
   - Use Vercel environment variables for secrets

3. **Rate Limiting**: Consider adding rate limiting for production

---

## ğŸ“Š Monitoring

After deployment:

1. Check Vercel Dashboard for:
   - Deployment history
   - Function invocations
   - Error logs
   - Performance metrics

2. Monitor API calls:
   - Check that queries are cached properly
   - Monitor database queries

---

## â“ FAQ

**Q: Can I deploy everything to one Vercel project?**
A: Yes! Vercel handles both. The root `vercel.json` handles routing.

**Q: What if my API changes?**
A: Push to GitHub â†’ Vercel auto-deploys (if you enabled it).

**Q: How do I rollback a deployment?**
A: Vercel Dashboard â†’ Deployments â†’ Select previous version â†’ Click "Redeploy".

**Q: Can I use a custom domain?**
A: Yes! Vercel â†’ Settings â†’ Domains â†’ Add your domain.

---

## ğŸš¨ Troubleshooting Commands

```bash
# Local build test
npm run build

# Test if API is working
curl http://localhost:5001/api/majors

# Check git status before pushing
git status

# View Vercel deployments
vercel list
```

---

## ğŸ“š Next Steps

1. âœ… Ensure code is pushed to GitHub
2. âœ… Test locally: `npm run backend` + `npm run dev`
3. âœ… Build frontend: `npm run build`
4. âœ… Deploy to Vercel (via Dashboard or CLI)
5. âœ… Set environment variables
6. âœ… Test production deployment
7. âœ… Set up custom domain (optional)
8. âœ… Enable auto-deployments on GitHub push

---

## ğŸ“– Resources

- [Vercel Documentation](https://vercel.com/docs)
- [Vercel Python Runtime](https://vercel.com/docs/functions/python)
- [Vercel Environment Variables](https://vercel.com/docs/projects/environment-variables)
- [Vite Environment Variables](https://vitejs.dev/guide/env-and-mode)

---

For more details, see `VERCEL_DEPLOYMENT_GUIDE.md`
