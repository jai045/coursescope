# ğŸ“‹ CourseScope Vercel Deployment - Quick Reference

> **TL;DR**: Build frontend â†’ Deploy backend â†’ Deploy frontend with env var â†’ Done!

## ğŸ¯ In 5 Steps

```
1. npm run build              (Build frontend)
   â†“
2. Deploy /api to Vercel      (Backend)
   â†“
3. Get backend URL            (e.g., https://api.vercel.app)
   â†“
4. Deploy frontend to Vercel  (Frontend) 
   â†“
5. Set VITE_API_URL env var   (Point to backend URL)
```

---

## ğŸ“š Documentation Files Created

| File | Purpose | Read When... |
|------|---------|---|
| **DEPLOYMENT_QUICK_START.md** | Step-by-step guide | First time deploying |
| **VERCEL_DEPLOYMENT_GUIDE.md** | Complete reference | Need detailed info |
| **DEPLOYMENT_VISUAL_GUIDE.md** | Architecture & diagrams | Want visual understanding |
| **VERCEL_DEPLOYMENT_CHECKLIST.md** | Pre-deployment checklist | Before deploying |
| **DEPLOYMENT_TROUBLESHOOTING.md** | Problem solving | Something doesn't work |
| **vercel.json** | Deployment config | Already configured âœ… |

---

## âš¡ Deploy Now (CLI)

### Backend

```bash
# Build frontend first
npm run build

# Deploy backend
vercel --prod

# Note the URL â†’ save it
# Example: https://coursescope-api.vercel.app
```

### Frontend

```bash
# Deploy frontend
vercel --prod

# When prompted for environment variables:
# VITE_API_URL = https://coursescope-api.vercel.app/api

# Example from above + /api at end
```

---

## ğŸ”‘ Key Concepts

### Local Dev
- Frontend: http://localhost:5173
- Backend: http://localhost:5001
- Proxy: `/api` â†’ `localhost:5001`
- No env vars needed âœ…

### Production (Vercel)
- Frontend: https://coursescope.vercel.app
- Backend: https://coursescope-api.vercel.app/api
- Direct requests: No proxy
- Env var: `VITE_API_URL` required âœ…

---

## ğŸš€ Deploy via Vercel Dashboard (No CLI)

### Backend
1. vercel.com/dashboard
2. "New Project"
3. Select repository
4. Root directory: leave empty
5. "Deploy"
6. **Note URL**

### Frontend
1. "New Project" (same repository, separate project)
2. Framework: Vite âœ“
3. Build: `npm run build` âœ“
4. Output: `dist` âœ“
5. Environment Variables:
   - `VITE_API_URL` = backend URL from above + `/api`
6. "Deploy"

---

## âœ… Verification

```bash
# Test backend
curl https://your-backend.vercel.app/api/majors

# Test frontend
# 1. Open https://your-frontend.vercel.app
# 2. Press F12 (DevTools)
# 3. Go to Network tab
# 4. Should see requests to backend URL
# 5. Data should display on page
```

---

## âš ï¸ Common Mistakes

| âŒ Wrong | âœ… Correct |
|---------|-----------|
| VITE_API_URL not set | Set in Vercel Dashboard |
| VITE_API_URL = localhost:5001 | VITE_API_URL = https://backend.vercel.app/api |
| Forgot /api at end | Include /api: https://backend.vercel.app/api |
| Changed env var but didn't redeploy | Always redeploy after changing env vars |
| Deployed frontend before backend | Deploy backend first, get URL, then deploy frontend |

---

## ğŸ” If Something's Wrong

1. **Blank page?**
   - Check DevTools Console for errors
   - Run `npm run build` locally - should complete without warnings

2. **API returns 404?**
   - Check `VITE_API_URL` in Vercel Dashboard
   - URL should be accessible: `curl https://backend-url/api/majors`

3. **CORS error?**
   - Backend must have CORS enabled
   - Check `api/_db.py`: `CORS(app, resources={r"/api/*": {"origins": "*"}})`

4. **Database missing?**
   - Check `api/uic_courses.db` exists in repo
   - Committed to GitHub? `git add api/uic_courses.db`

5. **Still stuck?**
   - See `DEPLOYMENT_TROUBLESHOOTING.md`

---

## ğŸ“¦ Project Structure

```
coursescope/
â”œâ”€â”€ api/                    â† Deploy this as backend
â”‚   â”œâ”€â”€ _db.py
â”‚   â”œâ”€â”€ majors.py
â”‚   â”œâ”€â”€ courses.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ uic_courses.db
â”œâ”€â”€ src/                    â† Build this
â”‚   â””â”€â”€ ...
â”œâ”€â”€ dist/                   â† Generated by npm run build
â”‚   â””â”€â”€ ... (deploy this as frontend)
â”œâ”€â”€ package.json            â† Frontend config
â”œâ”€â”€ vite.config.js          â† Frontend config
â”œâ”€â”€ vercel.json             â† Deployment config âœ…
â”œâ”€â”€ DEPLOYMENT_QUICK_START.md
â”œâ”€â”€ VERCEL_DEPLOYMENT_GUIDE.md
â”œâ”€â”€ DEPLOYMENT_VISUAL_GUIDE.md
â”œâ”€â”€ VERCEL_DEPLOYMENT_CHECKLIST.md
â””â”€â”€ DEPLOYMENT_TROUBLESHOOTING.md
```

---

## ğŸ”„ Environment Variable Flow

```javascript
// In src/App.jsx
const API_URL = import.meta.env.VITE_API_URL || "/api";

// Local Dev: import.meta.env.VITE_API_URL = undefined
//   â†’ Falls back to "/api"
//   â†’ Vite proxy routes to localhost:5001 âœ…

// Production: import.meta.env.VITE_API_URL = "https://backend.vercel.app/api"
//   â†’ Uses backend URL directly
//   â†’ No proxy needed âœ…
```

---

## ğŸ“Š Pre-Deployment Checklist

Quick check before deploying:

- [ ] Code works locally (`npm run dev` + `npm run backend`)
- [ ] Frontend builds: `npm run build`
- [ ] No TypeScript/ESLint errors: `npm run lint`
- [ ] Git status clean: `git status`
- [ ] Everything pushed to GitHub: `git push origin main`
- [ ] Database file committed: `git add api/uic_courses.db`
- [ ] vercel.json exists in root

**If all checked:** Ready to deploy! ğŸš€

---

## ğŸ“ Learn More

- **Quick Start**: DEPLOYMENT_QUICK_START.md
- **Full Guide**: VERCEL_DEPLOYMENT_GUIDE.md
- **Diagrams**: DEPLOYMENT_VISUAL_GUIDE.md
- **Checklist**: VERCEL_DEPLOYMENT_CHECKLIST.md
- **Problems?**: DEPLOYMENT_TROUBLESHOOTING.md

---

## ğŸ¯ After Deployment

1. **Test the application:**
   - Click through all features
   - Check that data loads
   - Verify filtering works

2. **Monitor performance:**
   - Vercel Dashboard â†’ Analytics
   - Check function execution time
   - Monitor database queries

3. **Set up custom domain (optional):**
   - Vercel Dashboard â†’ Settings â†’ Domains
   - Add your domain

4. **Enable auto-deployments:**
   - Already enabled if you used GitHub!
   - Push to main â†’ Auto-deploys

---

## ğŸ†˜ Emergency Quick Fixes

**API not responding?**
```bash
# Redeploy backend
vercel --prod
```

**Frontend showing wrong API?**
```bash
# Check environment variable
# Vercel Dashboard â†’ Settings â†’ Environment Variables
# Make sure VITE_API_URL is set correctly
# Redeploy frontend
vercel --prod
```

**Database missing?**
```bash
# Generate locally
cd backend
python generic_course_scraper.py
python generic_major_scraper.py

# Commit and push
git add api/uic_courses.db
git push origin main

# Redeploy
vercel --prod
```

---

**Need help?** Start with `DEPLOYMENT_QUICK_START.md` â†’

Good luck! ğŸš€
